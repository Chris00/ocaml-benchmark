#!/bin/bash

# Make a tarball
SCRIPT_DIR=`dirname $0`

oasis setup

PKGNAME=$(oasis query name)
PKGVERSION=$(oasis query version)
PKG_TARBALL=$PKGNAME-$PKGVERSION.tar.gz

DISTFILES="INSTALL.txt LICENSE.txt META Makefile Makefile.conf README.txt \
	*.ml *.mli examples/ \
	benchmark.mllib _tags setup.ml _oasis API.odocl"


if [ -z "$PKGNAME" ]; then echo "PKGNAME not defined"; exit 1; fi
if [ -z "$PKGVERSION" ]; then echo "PKGVERSION not defined"; exit 1; fi

mkdir $PKGNAME-$PKGVERSION
#mv Make.bat $PKGNAME-$PKGVERSION
cp -r $DISTFILES $PKGNAME-$PKGVERSION

tar -zcvf $PKG_TARBALL $PKGNAME-$PKGVERSION

rm -rf $PKGNAME-$PKGVERSION
